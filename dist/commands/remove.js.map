{"version":3,"file":"remove.js","sourceRoot":"/","sources":["commands/remove.ts"],"names":[],"mappings":";;AAAA,2CAAsH;AACtH,4CAAyD;AAEzD;;;;;EAKE;AAEF,MAAqB,aAAc,SAAQ,uBAAW;IAC9C,MAAM,CAAC,IAAI,GAA6C,IAAI,gCAAmB,EAAE;SACtF,OAAO,CAAC,QAAQ,CAAC;SACjB,cAAc,CAAC,gCAAgC,CAAC,CAAC;IACnD,YAAY,MAAsB;QACjC,KAAK,CAAC,MAAM,CAAC,CAAC;IACf,CAAC;IAED,KAAK,CAAC,OAAO,CAAC,WAA+B;QAC5C,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC;YAC1D,MAAM,EAAE;gBACP,OAAO,EAAE,IAAI;aACb;YACD,KAAK,EAAE;gBACN,SAAS,EAAE,WAAW,CAAC,OAAO,EAAE,EAAE;aAClC;SACD,CAAC,CAAC;QACH,IAAI,CAAC,MAAM;YAAE,OAAO,WAAW,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,kBAAkB,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAErH,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAa,CAAC;QAC5D,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC;YAAE,OAAO,WAAW,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,8BAA8B,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAEjJ,MAAM,UAAU,GAAW,EAAE,CAAC;QAC9B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,UAAU,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAChE;QAED,MAAM,GAAG,GAAG,IAAI,6BAAgB,EAA2B,CAAC,aAAa,CACxE,IAAI,oCAAuB,EAAE;aAC3B,WAAW,CAAC,YAAY,CAAC;aACzB,cAAc,CAAC,gCAAgC,CAAC;aAChD,YAAY,CAAC,CAAC,CAAC;aACf,YAAY,CAAC,YAAY,CAAC,MAAM,CAAC;aACjC,UAAU;QACV,gIAAgI;QAChI,UAAU,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE;YACvB,OAAO;gBACN,KAAK,EAAE,IAAI,CAAC,GAAG;gBACf,KAAK,EAAE,IAAI,CAAC,EAAE;aACd,CAAC;QACH,CAAC,CAAC,CACF,CACF,CAAC;QACF,MAAM,WAAW,CAAC,KAAK,CAAC,EAAE,UAAU,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAAC,CAAC;;AA3ChF,gCA4CC;AAED;;;;;EAKE","sourcesContent":["import { SlashCommandBuilder, ActionRowBuilder, StringSelectMenuBuilder, CommandInteraction, User } from \"discord.js\";\nimport {BaseCommand, ExtendedClient} from \"../structure\";\n\n/*\nCopyright 2023 Sayrix (github.com/Sayrix)\n\nLicensed under the Creative Commons Attribution 4.0 International\nplease check https://creativecommons.org/licenses/by/4.0 for more informations.\n*/\n\nexport default class RemoveCommand extends BaseCommand {\n\tpublic static data: SlashCommandBuilder = <SlashCommandBuilder>new SlashCommandBuilder()\n\t\t.setName(\"remove\")\n\t\t.setDescription(\"Remove someone from the ticket\");\n\tconstructor(client: ExtendedClient) {\n\t\tsuper(client);\n\t}\n\n\tasync execute(interaction: CommandInteraction) {\n\t\tconst ticket = await this.client.prisma.tickets.findUnique({\n\t\t\tselect: {\n\t\t\t\tinvited: true,\n\t\t\t},\n\t\t\twhere: {\n\t\t\t\tchannelid: interaction.channel?.id\n\t\t\t}\n\t\t});\n\t\tif (!ticket) return interaction.reply({ content: \"Ticket not found\", ephemeral: true }).catch((e) => console.log(e));\n\n\t\tconst parseInvited = JSON.parse(ticket.invited) as string[];\n\t\tif (parseInvited.length < 1) return interaction.reply({ content: \"There are no users to remove\", ephemeral: true }).catch((e) => console.log(e));\n\n\t\tconst addedUsers: User[] = [];\n\t\tfor (let i = 0; i < parseInvited.length; i++) {\n\t\t\taddedUsers.push(await this.client.users.fetch(parseInvited[i]));\n\t\t}\n\n\t\tconst row = new ActionRowBuilder<StringSelectMenuBuilder>().addComponents(\n\t\t\tnew StringSelectMenuBuilder()\n\t\t\t\t.setCustomId(\"removeUser\")\n\t\t\t\t.setPlaceholder(\"Please select a user to remove\")\n\t\t\t\t.setMinValues(1)\n\t\t\t\t.setMaxValues(parseInvited.length)\n\t\t\t\t.addOptions(\n\t\t\t\t\t// @TODO: Fix type definitions when I figure it out via ORM migration. For now assign a random type that gets the error removed.\n\t\t\t\t\taddedUsers.map((user) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tlabel: user.tag,\n\t\t\t\t\t\t\tvalue: user.id,\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t);\n\t\tawait interaction.reply({ components: [row] }).catch((e) => console.log(e));\t}\n}\n\n/*\nCopyright 2023 Sayrix (github.com/Sayrix)\n\nLicensed under the Creative Commons Attribution 4.0 International\nplease check https://creativecommons.org/licenses/by/4.0 for more informations.\n*/\n"]}