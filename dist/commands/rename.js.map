{"version":3,"file":"rename.js","sourceRoot":"/","sources":["commands/rename.ts"],"names":[],"mappings":";;AAAA,2CAA+F;AAC/F,4CAAyD;AAEzD;;;;;EAKE;AAEF,MAAqB,aAAc,SAAQ,uBAAW;IAC9C,MAAM,CAAC,IAAI,GAA6C,IAAI,gCAAmB,EAAE;SACtF,OAAO,CAAC,QAAQ,CAAC;SACjB,cAAc,CAAC,mBAAmB,CAAC;SACnC,eAAe,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,4BAA4B,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;IACrH,YAAY,MAAsB;QACjC,KAAK,CAAC,MAAM,CAAC,CAAC;IACf,CAAC;IAED,KAAK,CAAC,OAAO,CAAC,WAA+B;QAC5C,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC;YAC1D,KAAK,EAAE;gBACN,SAAS,EAAE,WAAW,CAAC,OAAO,EAAE,EAAE;aAClC;SACD,CAAC,CAAC;QACH,IAAI,CAAC,MAAM;YAAE,OAAO,WAAW,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,kBAAkB,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACrH,IAAI,CAAE,WAAW,CAAC,MAA6B,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,8BAA8B,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACzI,OAAO,WAAW;iBAChB,KAAK,CAAC;gBACN,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,4BAA4B,CAAC;gBACnE,SAAS,EAAE,IAAI;aACf,CAAC;iBACD,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAE/B,WAAW,CAAC,OAAuB,EAAE,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,KAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAClI,WAAW;aACT,KAAK,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,OAAO,CAAC,SAAS,EAAG,WAAW,CAAC,OAA8B,EAAE,QAAQ,EAAE,IAAI,SAAS,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;aAC5K,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAAC,CAAC;;AA3BnC,gCA4BC;AAED;;;;;EAKE","sourcesContent":["import { CommandInteraction, GuildMember, SlashCommandBuilder, TextChannel } from \"discord.js\";\nimport {BaseCommand, ExtendedClient} from \"../structure\";\n\n/*\nCopyright 2023 Sayrix (github.com/Sayrix)\n\nLicensed under the Creative Commons Attribution 4.0 International\nplease check https://creativecommons.org/licenses/by/4.0 for more informations.\n*/\n\nexport default class RenameCommand extends BaseCommand {\n\tpublic static data: SlashCommandBuilder = <SlashCommandBuilder>new SlashCommandBuilder()\n\t\t.setName(\"rename\")\n\t\t.setDescription(\"Rename the ticket\")\n\t\t.addStringOption((option) => option.setName(\"name\").setDescription(\"The new name of the ticket\").setRequired(true));\n\tconstructor(client: ExtendedClient) {\n\t\tsuper(client);\n\t}\n\n\tasync execute(interaction: CommandInteraction) {\n\t\tconst ticket = await this.client.prisma.tickets.findUnique({\n\t\t\twhere: {\n\t\t\t\tchannelid: interaction.channel?.id\n\t\t\t}\n\t\t});\n\t\tif (!ticket) return interaction.reply({ content: \"Ticket not found\", ephemeral: true }).catch((e) => console.log(e));\n\t\tif (!(interaction.member as GuildMember | null)?.roles.cache.some((r) => this.client.config.rolesWhoHaveAccessToTheTickets.includes(r.id)))\n\t\t\treturn interaction\n\t\t\t\t.reply({\n\t\t\t\t\tcontent: this.client.locales.getValue(\"ticketOnlyRenamableByStaff\"),\n\t\t\t\t\tephemeral: true,\n\t\t\t\t})\n\t\t\t\t.catch((e) => console.log(e));\n\n\t\t(interaction.channel as TextChannel)?.setName(interaction.options.get(\"name\", true).value as string).catch((e) => console.log(e));\n\t\tinteraction\n\t\t\t.reply({ content: this.client.locales.getValue(\"ticketRenamed\").replace(\"NEWNAME\", (interaction.channel as TextChannel | null)?.toString() ?? \"Unknown\"), ephemeral: false })\n\t\t\t.catch((e) => console.log(e));\t}\n}\n\n/*\nCopyright 2023 Sayrix (github.com/Sayrix)\n\nLicensed under the Creative Commons Attribution 4.0 International\nplease check https://creativecommons.org/licenses/by/4.0 for more informations.\n*/\n"]}